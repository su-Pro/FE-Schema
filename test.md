- 第一个是它的接口(Interface) [](marginnote3app://note/264D2144-B7A2-4C76-8600-654D573EBAB4)
	- 平时听说的并行接口(Parallel Interface)、串行接口(Serial Interface)、USB 接口,都是计算机主板上内置的各个接口。 [](marginnote3app://note/A09FBC8C-C2FE-4BA5-8CEE-3C0B1B2A1ACF)
	- 接口本身就是一块电路板。CPU 其实不是和实际的硬件设备打交道,而是和这个接口电路板打交道。 [](marginnote3app://note/125D2FFA-3153-4127-9285-F77AC1D9059A)
		- 设备里面有三类寄存器,其实都在这个设备的接口电路上,而不在实际的设备上 [](marginnote3app://note/8B61B6CC-620F-41DF-A5F8-2BFE54C92BBB)
			- 状态寄存器(Status Register) [](marginnote3app://note/F87155CE-5D1C-447C-983C-980221A9EF9D)
			- 命令寄存器(Command Register) [](marginnote3app://note/7FCD4640-567A-48FD-8F75-0B55CF3E5842)
			- 数据寄存器(Data Register) [](marginnote3app://note/8588DA55-7038-4BF6-8F28-DFD2FD0403FE)
			- CPU和I/O设备通信过程 [](marginnote3app://note/FCAF4D97-4EF7-470C-B4F3-6170EB322BD1)
				- 设备实际的/O硬件设备电路控制信号接口控制电路接口命令寄存器状态寄存器数据寄存器数据缓冲Command Register Status Register Data Register 设备内存系统总线 [](marginnote3app://note/A957221C-D7B8-4EC1-B05B-BB28BC8C7173)
				- 首先是数据寄存器(Data Register)。CPU 向 I/O 设备写入需要传输的数据,比如要打印的内容是“GeekTime”,我们就要先发送一个“G”给到对应的 I/O 设备。 [](marginnote3app://note/E812FD3A-F519-4830-91E5-634B1293DFF2)
				- 然后是命令寄存器(Command Register)。CPU 发送一个命令,告诉打印机,要进行打印工作。这个时候,打印机里面的控制电路会做两个动作。第一个,是去设置我们的状态寄存器里面的状态,把状态设置成 not-ready。第二个,就是实际操作打印机进行打印。 [](marginnote3app://note/276A2D64-5F87-42EE-AF1C-48793D6E41EB)
				- . 而状态寄存器(Status Register),就是告诉了我们的 CPU,现在设备已经在工作了,所以这个时候,CPU 你再发送数据或者命令过来,都是没有用的。直到前面的动作已经完成,状态寄存器重新变成了 ready 状态,我们的 CPU 才能发送下一个字符和命令。 [](marginnote3app://note/65D34DAB-144F-4052-95CC-25A89F24754E)
				- 在实际情况中,打印机里通常不只有数据寄存器,还会有数据缓冲区。我们的 CPU 也不是真的一个字符一个字符这样交给打印机去打印的,而是一次性把整个文档传输到打印机的内存或者数据缓冲区里面一起打印的。 [](marginnote3app://note/E16137E2-08A1-4C1F-BBDF-FFA8E36E2C5E)
				- 消息格式：CPU机器指令 [](marginnote3app://note/2D20AE60-CABE-4CCD-89A8-0D2A8084A01A)
					- 内存映射IO（MMIO） [](marginnote3app://note/457EF988-0E62-49E1-B13A-C8E6DE53BB98)
						- 内存地址空间00000000000000000000 SATA 接口Memory Range SATA Controller 内存地址空间USB Controller USB Memory Range 内存地址空间接口FFFFFFFFFFFFFFF MMIO [](marginnote3app://note/7838137C-CD30-45D7-A8A3-2B132BDF87AD)
						- 为了让已经足够复杂的 CPU 尽可能简单,计算机会把 I/O 设备的各个寄存器,以及 I/O 设备内部的内存地址,都映射到主内存地址空间里来。主内存的地址空间里,会给不同的 I/O 设备预留一段一段的内存地址。CPU 想要和这些 I/O 设备通信的时候呢,就往这些地址发送数据。 [](marginnote3app://note/72AD4CB9-FFD1-4318-882F-B9827D0C63B7)
						- 这些地址信息,就是通过上一讲的地址线来发送的,而对应的数据信息呢,自然就是通过数据线来发送的了 [](marginnote3app://note/5DCEC991-81AB-4C80-A396-4419B46E249B)
						- 而我们的 I/O 设备呢,就会监控地址线,并且在 CPU 往自己地址发送数据的时候,把对应的数据线里面传输过来的数据,接入到对应的设备里面的寄存器和内存里面来。CPU 无论是向 I/O 设备发送命令、查询状态还是传输数据,都可以通过这样的方式。 [](marginnote3app://note/0F813734-15B7-4F5C-B316-64385D72FEA6)
					- 端口映射PMIO [](marginnote3app://note/3E8756E4-1D07-4709-85B1-BD874035D658)
						- 其实 PMIO 的通信方式和 MMIO 差不多,核心的区别在于,PMIO 里面访问的设备地址, 不再是在内存地址空间里面,而是一个专门的端口(Port)。这个端口并不是指一个硬件上的插口,而是和 CPU 通信的一个抽象概念。 [](marginnote3app://note/94CBDDDF-A2AB-4B40-A028-96626A2E7CED)
					- 这是我计算机上,设备管理器里显卡设备的资源信息 [](marginnote3app://note/6CAD91BF-593C-42FC-8012-8E5CED378520)
					- 设计模式里面的 Command 模式。我们在总线上传输的,是一个个数据对象,然后各个接受这些对象的设备,再去根据对象内容,进行实际的解码和命令执行。 [](marginnote3app://note/928956A8-23CF-4538-932A-D5287AF44F4E)
	- 面向接口的架构 [](marginnote3app://note/FA5454A4-228D-4230-B87E-EB2A62E81737)
		- Devices(设备)、Controllers(控制器)、Adaptors(适配器) [](marginnote3app://note/60F69F04-5A7D-4A34-B7EF-4CBC0D0CDFC4)
			- 其实都是对于 [](marginnote3app://note/52CA487F-A737-40CA-82B0-4C182A05AC45)